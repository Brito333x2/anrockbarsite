<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Agenda Shows</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
    <link href="css/agenda.css" rel="stylesheet" />
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="#page-top">
            <img src="assets/img/anlogo.png" alt="AN Rock Bar" style="width: 65px;">
        </a>
        <span class="navbar-text" style="margin-left: 10px; font-size: 18px; font-weight: bold;">
            Agenda completa
        </span>
    </div>
</nav>

<!-- Seção Agenda -->
<section class="agenda py-5" id="agenda" style="margin-top: 80px;">
    <div class="container">
        <h2 class="text-center">Agenda de Shows</h2>
        <div class="row" id="showsContainer">
            <!-- Shows serão carregados aqui -->
        </div>
    </div>
</section>

<!-- Modal de Show -->
<div class="modal" id="showModal" tabindex="-1" aria-labelledby="showModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="showModalLabel">Detalhes do Show</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalContent">
                <!-- Detalhes do show aqui -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" id="btnReservar">Reservar</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Script para carregar os shows
  fetch('shows.json')
    .then(response => response.json())
    .then(shows => {
        const showsContainer = document.getElementById('showsContainer');

        shows.filter(show => show.geral === true).forEach((show, index) => {
            const showCard = document.createElement('div');
            showCard.className = 'col-md-6 mb-4'; // Ajustando para 2 colunas
            showCard.innerHTML = `
                <div class="card">
                    <img src="${show.imagem}" class="card-img-top" alt="${show.nome}" style="cursor: pointer;">
                    <div class="card-body">
                        <h5 class="card-title">${show.nome}</h5>
                        <p><strong>Data:</strong> ${show.data} | <strong>Horário:</strong> ${show.horario}</p>
                        <p><strong>Preço:</strong> ${show.preco}</p>
                        <button class="btn btn-primary show-details" data-show-id="${index}">Ver detalhes</button>
                    </div>
                </div>
            `;
            showsContainer.appendChild(showCard);

            showCard.querySelector('.show-details').addEventListener('click', () => {
                const selectedShow = shows[index];
                document.getElementById('showModalLabel').textContent = selectedShow.nome;
                document.getElementById('modalContent').innerHTML = `
                    <p><strong>Data:</strong> ${selectedShow.data} | <strong>Horário:</strong> ${selectedShow.horario}</p>
                    <p><strong>Descrição:</strong> ${selectedShow.descricao}</p>
                    <p><strong>Preço:</strong> ${selectedShow.preco}</p>
                `;
                const modal = new bootstrap.Modal(document.getElementById('showModal'));
                modal.show();
            });
        });
    });

  document.getElementById('btnReservar').addEventListener('click', () => {
      const showSelecionado = document.getElementById('showModalLabel').textContent;
      const qtd = parseInt(prompt('Quantos ingressos você deseja reservar?'));
      if (!showSelecionado || qtd < 1) return;

      const numeroWhatsApp = "5511961201454"; // Substitua com o número real
      const mensagem = `Olá! Gostaria de reservar ${qtd} ingresso(s) para o show: ${showSelecionado}.`;

      const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, '_blank');
  });
</script>

</body>
</html>
